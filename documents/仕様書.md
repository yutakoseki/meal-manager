1. システム概要

名称：ミールマネージャー PoC モック

目的：

冷蔵庫の在庫とスーパー特売情報を管理し、
「子供の栄養を意識した献立提案」と「在庫更新フロー」の体験を確認する。

対象ユーザー：

保護者（一般ユーザー）

スーパー店員（特売登録用。今回は同一画面から操作するだけでロール分離しない）

2. スコープ（PoC モック）
   2.1 含める機能

冷蔵庫の食材管理

特売情報の管理

子供情報の入力

AI 風の献立提案（実装はモック／簡易ロジックでよい）

提案献立を元にした在庫更新（数量減算）

2.2 含めない機能

ログイン／ユーザー管理

位置情報取得・地図連携・500m 判定

複数店舗の厳密な管理（店舗区別は任意）

厳密な栄養計算（PFC など数値ベース）

通知・レコメンド履歴・家族共有

3. 技術要件

フロント：Next.js (App Router) + TypeScript

ホスティング：Vercel（本番相当 1 環境）

バックエンド：Next.js Route Handlers を API として利用

DB：AWS DynamoDB

Vercel → AWS への接続は AWS SDK + 環境変数で認証情報を設定

認証：なし（全ユーザー共通 DB を使う PoC）

4. 画面一覧

共通レイアウト

ヘッダ：アプリ名、ナビゲーション（冷蔵庫 / 特売 / 献立）

冷蔵庫画面（食材一覧・編集）

特売情報画面（特売一覧・編集）

献立提案画面（子供情報入力 + 献立生成 + 在庫更新）

5. 機能要件
   5.1 共通

画面遷移

ヘッダのナビゲーションで各画面を SPA 的に切り替え

バリデーション（最低限）

必須項目の未入力チェック

数量・価格などの数値項目は 0 以上の数値

5.2 冷蔵庫画面

概要
ユーザーが冷蔵庫の食材を手動で登録・編集・削除する。

機能一覧

食材一覧表示

項目：名前、数量、単位、賞味期限、カテゴリ、メモ

賞味期限が近い順にソート（任意）

食材追加

入力項目：

name（必須）

quantity（必須、数値）

unit（任意：個 / g / ml など文字列）

expiryDate（任意、YYYY-MM-DD 文字列）

category（任意：肉・魚・野菜・乳製品など）

memo（任意）

食材編集

既存データの上書き

食材削除

単一削除（確認ダイアログは任意）

5.3 特売情報画面

概要
スーパー店員想定で特売情報を登録・編集・削除する。

機能一覧

特売一覧表示

項目：商品名、価格、割引率 or 割引後価格、期間、カテゴリ、メモ

特売追加

入力項目：

name（必須）

price（必須、数値）

discountRate（任意、%）または discountedPrice（任意）

startDate（任意）

endDate（任意）

category（任意）

memo（任意）

特売編集 / 削除

冷蔵庫画面と同様の CRUD

※PoC では「どの店舗の特売か」は固定 or 単一店舗扱いとする。

5.4 献立提案画面

概要
子供情報と在庫・特売情報を元に AI 風献立を提案し、採用した献立に応じて在庫更新する。

機能一覧

子供プロフィール入力

childCount（人数、数値）

ages（任意、文字列例「3 歳,5 歳」）

allergies（任意、カンマ区切り文字列）

dislikes（任意、嫌いな食材リスト文字列）

入力内容は API 経由で DynamoDB に保存し、画面表示時に読み出し（1 レコード想定）

献立提案（AI モック）

「献立を提案」ボタン

API に POST する情報：

現在の食材一覧

特売情報一覧（有効期間中だけでも可・簡略で良い）

子供プロフィール

API からのレスポンス（モック仕様）：

複数候補（例：最大 3 件）

各献立：

menuTitle（例：「鶏肉と野菜の照り焼きプレート」）

description（簡単な説明）

usedIngredients：

ingredientId or name

usedQuantity

nutritionComment（例：「たんぱく質＋野菜多めのバランス」）

実装は固定レスポンス or 単純ルールでよく、AI 接続は必須ではない。

献立採用と在庫更新提案

ユーザーが候補の中から「この献立を採用」ボタンを押下

使用食材一覧と使用量を確認できる画面（モーダルでも可）

各食材の「在庫更新後数量」を自動計算（quantity - usedQuantity）

ユーザーが数量を最終調整（マイナス値にならないようチェック）

在庫の確定更新

「在庫を更新」ボタンで DynamoDB の食材テーブルを一括更新

更新後、冷蔵庫画面の一覧に反映される

6. API 要件（Next.js Route Handlers）

（エンドポイント例）

6.1 食材 API

GET /api/ingredients

全食材一覧を返却

POST /api/ingredients

食材追加

PUT /api/ingredients/:id

食材更新

DELETE /api/ingredients/:id

食材削除

6.2 特売 API

GET /api/sales

POST /api/sales

PUT /api/sales/:id

DELETE /api/sales/:id

6.3 子供プロフィール API

GET /api/child-profile（1 件だけ返却）

PUT /api/child-profile（上書き保存）

6.4 献立提案 API（モック）

POST /api/menu/suggest

body：{ ingredients, sales, childProfile }

response：献立候補リスト（前述の形式）

7. データ要件（DynamoDB 設計）

PoC なのでテーブルはシンプルに 3 テーブル 想定。

7.1 ingredients テーブル

パーティションキー：id（string, UUID）

属性例：

id: string

name: string

quantity: number

unit: string

expiryDate: string (YYYY-MM-DD)

category: string

memo: string

createdAt: string (ISO)

updatedAt: string (ISO)

7.2 sales テーブル

パーティションキー：id（string）

属性例：

id: string

name: string

price: number

discountRate: number

discountedPrice: number

startDate: string

endDate: string

category: string

memo: string

createdAt: string

updatedAt: string

7.3 child_profile テーブル

パーティションキー：id（string, 固定値 "default" など）

属性例：

id: string

childCount: number

ages: string

allergies: string

dislikes: string

updatedAt: string

※将来マルチユーザー化する場合は userId を追加してパーティションキーに含める想定。

8. 非機能要件（PoC レベル）

パフォーマンス：数ユーザー・数百レコードを想定。チューニング不要。

信頼性：障害時は再デプロイや手動リカバリで対応

セキュリティ：認証なしだが、エンドポイントを公開する前提で最低限の入力チェックのみ

ログ：Vercel のログを使用（独自ログ基盤は不要）
